#!/bin/bash
#Script by AtaLioMego™

# colour
BGreen='\e[1;32m'
NC='\e[0m'
DEFBOLD='\e[39;1m'
RB='\e[31;1m'
GB='\e[32;1m'
YB='\e[33;1m'
BB='\e[34;1m'
MB='\e[35;1m'
CB='\e[35;1m'
WB='\e[37;1m'

echo -e "$BBlue                ue              88Nu Mod    $NC"
    echo -e "$BBlue              88Numb || Cincop by AtaLioMego      $NC"
        echo -e "$BYellow------------------------------ipv4.icanhazip.com)
        MYIP=$(wget -qMYIP=$(curl -sS ipv4.icanhmeriksa vps anda(wget -qO- ipinfo.io/ip);
        echo "memeriksa vps anda"
        sleep 0.5
        CEKEXPIRED () {
                today=$(date -d +1day +%Y -%m -%d)
                        Exp1=$(curl -sS https://raw.githubusercontent.com/yardproject/hele/main/ip | grep $MYIP | awk '{print $3}')
                                if [[ $today < $Exp1 ]]; then
                                        echo "status script aktif.."
                                                else
                                                        echo "SCRIPT ANDA EXPIRED";
                                                                exit 0
                                                                fi
                                                                }
                                                                IZIN=$(curl -sS https://raw.githubusercontent.com/yardproject/hele/main/ip | awk '{print $4}' | grep $MYIP)
                                                                if [ $MYIP = $IZIN ]; then
                                                                echo echo "Tererdeteksi: 1171114160-88numb-Ataliomego"
                                                                echo "Terimakasih Telah memilih layanan Server Tunnel VPN kami! "

                                                                CEKEXPIRED
                                                                else
                                                                echo "Akses di tolak!! Po'u Nia Dulu Broooo!!";
                                                                echo "Hubungi: wa.me/6281333398151";
                                                                exit 0
                                                                fi 

                                                                # Bersihkan xray
                                                                rm -rf xray
                                                                clear

                                                                # konversi waktu
                                                                secs_to_human() {
                                                                echo -e "${WB}Installation time : $(( ${1} / 3600 )) hours $(( (${1} / 60) % 60 )) minute's $(( ${1} % 60 )) secosistem
                                                                apt update -y
                                                                apt upgrade -y
                                                                apt dist-upgraer-pyrsistent -y
                                                                apt install vnstall socat netfilter-pet install curl sudo -y
                                                                aptori
                                                                v/null 2>&1
                                                                mkdir /tmp >> /dev/null 2>&1

                                                                # Instalasi resolvls b
                                                                nd9 -y

                                                                # Konfigurasi DNS Cloudflare
                                                                cat > /etc/systemd/resolved.conf << END
                                                                [Resolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHostsolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHostsolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHostsolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHostsolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHostsolve]
                                                                DNS=1.1.1.1 1.0.0.1 
                                                                Domains=~.
                                                                ReadEtcHosts=yes
                                                                END

                                                                # Mengaktifkan layanan yang diperlukan
                                                                systemctl enable resolvconf
                                                                systemctl enable systemd-resolved
                                                                sysnf
                                                                rm -rf /etc/7.0.0.53
                                                                "esol/.conf.d/head
                                                                systemctl red
                                                                systemctl restart NetworkManager
                                                                echo "Cloudflare DNStemctl restart NetworkManager
                                                                echo "Cloudflare DNStemctl restart NetworkManager
                                                                echo "Cloudflare DNStemctl restart NetworkManager
                                                                echo "Cloudflare DNStemctl restart NetworkManager
                                                                echo "Cloudflare DNS" > /user/cu1
                                                                rm /usr/local/etc/xray/org >> /d>> /dev/null 2>&1
                                                                rm /usr/local/etc/xray/org >> /dev/null 2>&1
                                                                rm /usr/local/etc/xray/timezone >> /dev/null 2>&1

                                                                # Instalasi Xray 
                                                                bash -c "$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)" - install --beta
                                                                cp /usr/local/bin/xray /backup/xray.offetc/xray/c/us
                                                                clocal/etc/etcy/ray/timezone
                                                                cleao.io/timezone >> /usr/local/etc/xray/timezone
                                                                cleao.io/timezone >> /usr/local/etc/xray/timezone
                                                                cleao.io/timezone >> /usr/local/etc/xray/timezone
                                                                clear

                                                                # Mengunduh dan menginstal Xray-core mod 
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Xray-core mod${NC}"
                                                                sleep 0.5
                                                                wget -q -O /backup/xray.mod.backup "https://github.com/dharak36/Xray-core/releases/download/v1.0.0/xray.linux.64bit"
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Download Xray-core done${NC}"
                                                                sleep 1
                                                                cd
                                                                clear

                                                                # Instalasi speedtest-cli
                                                                curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash
                                                                sudo apt-get install speedtest
                                                                clear

                                                                # Mengonfigurasi zona waktu
                                                                ln -fs /usr/share/zoneinfo/Asia/Jakarta /etc/localtime
                                                                apt install nginx -y
                                                                cd
                                                                rm /var/www/html/*.html
                                                                rm /etc/nginx/sites-enabled/default
                                                                rm /etc/nginx/sites-gai layanan
                                                                mkdir -p /var/www/html/vri untuk berbagai layanan
                                                                mkdir -p /var/www/html/vmess
                                                                mkdir -p /var/www/html/vless
                                                                mkdir -p /var/www/html/trojan
                                                                mkdir -p /var/www/html/shadowsocks
                                                                mkdir -p /var/www/html/shadowsocks2022
                                                                mkdir -p /var/www/html/socks5
                                                                mkdir -p /var/www/html/allxray
                                                                systemctl restart nginx
                                                                clear

                                                                # input domain
                                                                touch /usr/local/etc/xray/domain
                                                                echo -e "${YB}Input Domain${NC} "
                                                                echo " "
                                                                read -rp "Input domain kamu : " -e dns
                                                                if [ -z $dns ]; then
                                                                echo -e "Nothing ic/xray/domain
                                                                echo "DNS=$do "$dns" > /usr/local/etc/xray/domain
                                                                echo "DNS=$dns" > /var/lib/dnsvps.conf
                                                                fi
                                                                clear

                                                                systemctl stop nginx
                                                                systemctl stop xray

                                                                #CA SSL
                                                                domain=$(cat /usr/local/etc/xray/domain)
                                                                curl https://get.acme.sh | sh
                                                                source ~/.bashrc
                                                                cd .acme.sh
                                                                bash acme.sh --issue -d $domain --server letsencrypt --keylength ec-256 --fullchain-file /usr/local/etc/xray/fullchain.crt --key-file /usr/local/etc/xray/private.key --standalone --force
                                                                clear

                                                                # Mengatur konfigurasi Nginx dan Xray 
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Setup Nginx & Xray Conf${NC}"
                                                                echo "UQ3w2q98BItd3DPgyctdoJw4cqQFmY59ppiDQdqMKbw=" > /usr/local/etc/xray/serverpsk
                                                                wget -q -O /usr/local/etc/xray/config.json https://raw.githubusercontent.com/givpn/aio/master/other/config.json
                                                                wget -q -O /etc/nginx/nginx.conf https://raw.githuc/nginx/conf.d/xray.conf https://rf
                                                                wget -q -O /etc/nginx/conf.d/xray.conf https://rf
                                                                wget -q -O /etc/nginx/conf.d/xray.conf https://raw.githubusercontent.com/givpn/aio/master/other/xray.conf
                                                                systemctl restart nginxex.html "https://raw.githubusercontent.com/gi${NC} ${YB}Setup Done${NC}"
                                                                sleep 2
                                                                c${GB}[ INFO ]${NC} ${YB}Setup Done${NC}"
                                                                sleep 2
                                                                clear
                                                                iptables -A FO${YB}Setup Done${NC}"
                                                                sleep 2
                                                                clear
                                                                iptables -A FORWARD -m string --string "get_peers" string "announce_peer" --algo FORWARD -m string --string "announce_peer" --algo bm -j DROP
                                                                iptables -A FORWARD -mables -A FORWARD -m string --algogo bm -j DROP
                                                                iptables -A FORWARD -m string --algo bm --string "BitTorrent" -j DROP
                                                                iptables -A FORWARD -m string --algo bm --string "BitTorrent protocol" -j DROP
                                                                iptables -A FORWARD -m string --algo bm --string "peer_id=" -j DROP
                                                                iptables -A FORWARD -m string --algo bm --string ".torrent" -j DROP
                                                                iptablce.php?passkey=" -j ing --algo bm --string "announce.php?passkey=" -j DROP
                                                                iptables -A FORWARD -m string --algo bm --string "torrent" -j DROP
                                                                iptables -A FORWARD -m string --algRD -m string --algo bm --strinOP
                                                                iptables -A FORWARD -m string --algo bm --string "info_hash" -j DROP
                                                                iptables-< /etc/iptables.up.rules
                                                                netfilterbles-restore -t < /etc/iptables.up.rules
                                                                netfilter-persistent save
                                                                netfilter-persistent reload
                                                                cd /usr/bin


                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Main Menu${NC}"
                                                                wget -q -O menu "https://raw.githubusercontent.com/givpn/aio/master/menu/menu.sh"
                                                                wget -q -O vmess "https://raw.githubusercontent.com/givpn/aio/master/menu/vmess.sh"
                                                                wget -q -O vless "https://raw.githubusercontent.com/givpn/aio/master/menu/vless.sh"
                                                                wget -q -O trojan "https://raw.githubusercontent.com/givpn/aio/master/menu/trojan.sh"
                                                                wget -q -O shadowsocks "https://raw.githubusercontent.com/givpn/aio/master/menu/shadowsocks.sh"
                                                                wget -q -O shadowsocks2022 "https://raw.githubusercontent.com/givpn/aio/master/menu/shadowsocks2022.sh"
                                                                wget -q -O socks "https://raw.githubusercontent.com/givpn/aio/master/menu/socks.sh"
                                                                wget -q -O allxray "https://raw.githubusercontent.com/e "${GB}[ INster/menu/allxray.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menuhubusercontent.com/givpn/aio/master/vmess/add-vmess.susercontent.com/givpn/aio/master/vmess/add-vmess.sh"
                                                                wget -q -O del-vmesser/vmess/del-vmess.sh"
                                                                wgnt.com/givpn/aio/maste"https://raw.githubusercontent.com/givpn/aio/maste"https://raw.githubusercontent.com/givpn/aio/master/vmess/extend-vmess.sh"
                                                                wget -q -O trialvmess "https://raw.githubusercontent.com/givpn/aio/master/vmess/trialvmess.sh"
                                                                wget -q -O cek-vmess "https://raw.githubusercontent.com/givpn/aio/master/vmess/cek-vmess.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu Vless${NC}"
                                                                wget -q -O add-vless "https://raw.githubusercontent.com/givpn/aio/master/vless/add-vless.sh"
                                                                wget -q -O del-vless "https://raw.githubusercontent.com/givpn/aio/master/vless/del-vless.sh"
                                                                wget -q -O extend-vless "https://raw.githubusercontent.com/givpn/aio/master/vless/extend-vless.sh"
                                                                wget -q -O trialvless "https://raw.githubusercontent.com/givpn/aio/master/vless/trialvless.sh"
                                                                wget -q -O cek-vless "https://raw.githubusercontent.com/givpn/aio/master/vlesNC} ${YB}Downloading Men5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu Trojan${NC}"
                                                                wget -q -O add-trojan "httpsan/adthubusercoget t.com/givpn/aio/master/trojan/del-trojan.sh"
                                                                wget -q -O extend-trojanter/trojan/del-trojan.sh"
                                                                wget -q -O extend-trojanter/trojan/del-trojan.sh"
                                                                wget -q -O extend-trojan "https://raw.githubusercontent. -q -O trialt/master/troj://raialtrojan.sh"
                                                                wt.com/givp-/aio{GB}[ INFO ]$n/cek-trojan.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]$n/cek-trojan.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]$n/cek-trojan.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]$n/cek-trojan.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu Shadowsoccontent.coget -p -O o/master/saw.githubusercontent.com/givpn/aio/master/shado//raw.githubusercontent.com/givpn/aio/master/shado//raw.githubusercontent.com/givpn/aio/master/shadowsocks/del-ss.sh"
                                                                wget -q -O extend-ss "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks/extend-ss.sh"
                                                                wget -q -O trialss "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks/trialss.sh"
                                                                wget -q -O cek-ss "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks/cek-ss.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu Shadowsocks 2022${NC}"
                                                                wget -q -O add-ss2022 "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks2022/add-ss2022.sh"
                                                                wget -q -O del-ss2022 "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks2022/del-ss2022.sh"
                                                                wget -q -O extend-ss2022 "https://raw.githubusercontent.com/givpn/aio/master/shadowsocks2022/extegithubusercontent.com/givpn/aio/master/shadowsocks20thubusercontent.com/givpn/aio/master/shadowsocks2022/trialss202rcontent.com/gip 0.5
                                                                echo ter/shadowsocks2022/cek-ss2022.sh"
                                                                sleep 0.5
                                                                echo ter/shadowsocks2022/cek-ss2022.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFq -O add-socks "https://raw.gitSocks5${NC}"
                                                                wget -q -O add-socks "https://raw.githubusercontent-O del-socks "hsock:/del-socks.sh"
                                                                wget ent.com/givpn/aio/master/socks/del-socks.sh"
                                                                wget ent.com/givpn/aio/master/socks/del-socks.sh"
                                                                wget -q -O extend-socks "https://raw.githubusercontent.q -O trial/makser/socks/triw.githubusercontent.com/givpn/aio/master/socks/triw.githubusercontent.com/givpn/aio/master/socks/trialsocks.sh"
                                                                wget -q -O cek-socks "https://raw.githubusercontent.com/givpn/aio/master/socks/cek-socks.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu All Xray${NC}"
                                                                wget -q -O add-xray "https://raw.githubusercontent.com/givpn/aio/master/allxray/add-xray.sh"
                                                                wget -q -O del-xray "https://raw.githubusercontent.com/givpn/aio/master/allxray/del-xray.sh"
                                                                wget -q -O extend-xray "https://raw.githubusercontent.com/givpn/aio/master/allxray/extend-xray.sh"
                                                                wget -q -O trialxray "https://raw.githubusercontent.com/givpn/aio/master/allxray/trialxray.sh"
                                                                wget -q -O cek-xray "https://raw.githubusercontent.com/givpn/aio/master/allxray/cek-xray.sh"
                                                                sleep 0.5
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Downloading Menu Log${NC}"
                                                                wt.com/givpss "ottps://raw.githubusercontent.co -q -O log-vmess "https://raw.githubusercontent.com/givpn/aio/master/log/log-vmess.sh"
                                                                wercontent.com/givpn/aio/master/log/log-vmess.sh"
                                                                wget -q -O log-vless "https://raw.githubusercontent.com-trojan "httpster/log/log-vless.sh"
                                                                wget -q -O log-trojan "https://raw.githubusercontent.com/givpn/aio/master/log/log-trojan.sh"
                                                                wget -q -O log-ss "https://raw.githubusercontent.com/givpn/aio/master/log/log-ss.sh"
                                                                wget -q -O log-ss2022 "https://raw.githubusercontent.com/givpn/aio/master/log/log-ss2022.sh"
                                                                wget -q -O log-socks "https://raw.githubusercontent.com/givpn/aio/mast://raw.gig-socks.sh"
                                                                wget -q -O log-allxray "https://raw.githubusercontent.com/givpn/aio/master/log/lo} ${YB}Downloading Other Menu${NC}"
                                                                wget -q -O {NC} ${YB}Downloading Other Menu${NC}"
                                                                wget -q -O xp "https://raw.githubusercontent.com/givpn/aio/master/other/xp.sh"
                                                                wget -q -O dns "https://raw.githubusercontent.com/givpn/aio/master/other/dns.sh"
                                                                wget -q -O certxray "https://raw.githubusercontent.com/givpn/aio/master/other/certxray.sh"
                                                                wget -q -O xraymod "https://raw.githubusercontent.com/givpn/aio/master/other/xraymod.sh"
                                                                wget -q -Oivpn/official "https://raw.githubusercontent.com/givpn/aio/master/other/xrayofficial.sh"
                                                                wget -q -O about "https://raw.githubuse -q -O cleo/master/other/clear-log.ent.com/givpn/a${NC} ${YB}Doer/changer.sh"
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Doer/changer.sh"
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Doer/changer.sh"
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Doer/changer.sh"
                                                                echo -e "${GB}[ INFO ]${NC} ${YB}Download All Menu Done${NC}"
                                                                sleep 2

                                                                chmod +x add-vmess
                                                                chmod +x del-vmess
                                                                chmod +x extend-vmess
                                                                chmod +x trialvmess
                                                                chmod +x cek-vmess
                                                                chmod +x add-vless
                                                                chmod +x del-vless
                                                                chmod +x extend-vless
                                                                chmod +x trialvless
                                                                chmod +x cek-vless
                                                                chmod +x jdd-thmod +x trd +x djan
                                                                chmod +x cek-trojan
                                                                chmod +x add-ss
                                                                chmod +x djan
                                                                chmod +x cek-trojan
                                                                chmod +x add-ss
                                                                chmod +x del-ss
                                                                chmod +x extend-ss
                                                                chmod +x trialss
                                                                chmod +x cek-ss
                                                                chmod +x add-ss2022
                                                                chmod +x del-ss2022
                                                                chmod +x extend-ss2022
                                                                chmod +x trialss2022
                                                                chmod +x cek-ss2022
                                                                chmod +x add-socks
                                                                chmod +x del-socks
                                                                chmod +x extend-socks
                                                                chmod +x trialsocks
                                                                chmod +x cek-soxtend-xray
                                                                chmod +x trialxray
                                                                chmod +x cek-xray
                                                                chmodnd-xray
                                                                chmod +x trialxray
                                                                chmod +x cek-xray
                                                                chmod +x log-create
                                                                chmod +x log-vmess
                                                                chmod +x log-vless
                                                                chmod +x log-trojan
                                                                chmod +x log-ss
                                                                chmod +x log-ss2022
                                                                chmod +x log-socks
                                                                chmod +x log-allxray
                                                                chmod +x menu
                                                                chmod +x vmess
                                                                chmod +x vless
                                                                chmod +x trojan
                                                                chmod +x shadowsocks
                                                                chmod +x shadowsocks2022
                                                                chmod +x socks
                                                                chmod +x allxray
                                                                chmod +x xp
                                                                chmod +x dns
                                                                chmod +x certxray
                                                                chmod +x xraymod
                                                                chmod +x xrayofficial
                                                                chmod +x about
                                                                chmod +x clear-log
                                                                chmod +x changer
                                                                cd
                                                                echo "0 0 * * * root xp" >> /etc/crontab
                                                                echo "*/3 * * * * root clear-log" >> /etc/crontab
                                                                systemctl restart cron
                                                                cat > /root/.profile << END
                                                                if [ "$BASH" ]; then
                                                                if [ -f ~/.bashrc ]; then
                                                                . ~/.bashrc
                                                                fi
                                                                fi
                                                                mesg n || true
                                                                clear
                                                                menu
                                                                END
                                                                chmod 644 /root/.profil———————————————————o ""
                                                                echo -e "${BB}—————————————————————————————————————————————————————————${NC}"
                                                                echo -e "                     ${WB} Autoscript Xray ${NC}"
                                                                echo -e "                     ${WB} 88Numb || Cincop by AtaLioMego™${NC}"
                                                                echo -e "${BB}—————————————————————————————————————————————————————————${NC}"
                                                                echo -e "  ${WB}»»» Protocol Service «««  |  »»» Network Protocol «««${NC}  "
                                                                echo -e "${BB}—————————————————————————————————————————————————————————${NC}"
                                                                B}|${NC}  ${YB}- Websocket (C                  ${WB}|${NC}  ${YB}- Websocket (CDN) non TLS${NC}"
                                                                echo -e "  ${YB}- Vmess${NC}                   ${WB}|${NC}  ${YB}- Websocket (CDN) TLS${NC}"
                                                                echo -e "  ${YB}- Trojan${NC}                  ${WB}|${NC}  ${YB}- gRPC (CDN) TLS${NC}"
                                                                echo -e "  ${YB}- Socks5${NC}              }             $}        $—————————————————————————work Port Service «««${NC}             "
                                                                echo -e "${BB}—————Service «««${NC}             "
                                                                echo -e "${BB}—————————————————————————         "
                                                                echo -e "${BB}—————————————————————————         "
                                                                echo -e "${BB}—————————————————————————         "
                                                                echo -e "${BB}————————————————————————————————————————————————————————${NC}"
                                                                echo -e "  ${YB}- HTTPS : 443, 2053, 2083, 2087, 2096, 8443${NC}"
                                                                echo -e "  ${YB}- HTTP  : 80, 8080, 8880, 2052, 2082, 2086, 2095${NC}"
                                                                echo -e "${BB}————————————————————————————————————————————————————————${NC}"
                                                                echo ""
                                                                rm -f xray
                                                                secs_to_human "$(($(date +%s) - ${start}))"
                                                                echo "$BGreen Auto reboot 10 Sec $NC"
                                                                sleep 10
                                                                reboot
